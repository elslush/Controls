@using Controls.Buttons;
@using Controls.Selection;

@typeparam TItem where TItem : SelectableValue


<Button 
    Display="@Display"
>
    <Content>
        <span class="collapsible-btn-container">
	        <span class="collapsible-btn-content">@Content</span>
	        <span class="collapsible-btn-arrow @CollapsedArrowClass"></span>
        </span>
    </Content>
</Button>



@code {
    private bool isClicked = false;

    private string? CollapsedArrowClass => isClicked ? "collapsible-btn-arrow-active" : null;

    [Parameter]
    public TItem Item { get; set; }

    [Parameter]
    public string Display { get; set; } = "block";

    [EditorRequired]
    [Parameter]
    public RenderFragment? Content { get; set; }

    protected override void OnParametersSet()
    {
        Item.OnSelect += OnSelect;
    }

    private void OnSelect(object? sender, bool isSelected)
    {
        isClicked = isSelected;
        StateHasChanged();
    }
}
