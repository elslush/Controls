@typeparam TItem where TItem : IListItem

@foreach (var item in Items)
{
    @ItemTemplate(item)
}

@code {
    private bool shouldRender;

    private IEnumerable<TItem> previousItems = Enumerable.Empty<TItem>();

    [EditorRequired]
    [Parameter]
    public RenderFragment<TItem> ItemTemplate { get; set; }

    [EditorRequired]
    [Parameter]
    public IEnumerable<TItem> Items { get; set; } = Enumerable.Empty<TItem>();

    [Parameter]
    public int MaxSelectionCount { get; set; } = 0;

    protected override void OnParametersSet()
    {
        shouldRender = !Items.SequenceEqual(previousItems);
        previousItems = Items;
    }

    protected override bool ShouldRender() => shouldRender;
}
